---
layout: post
title: Sample outputs for emotion-based music generation
style: wide
---

This page presents the output samples of my emotion-based symbolic music generation models. In simple term, the models are able to automatically create music that correspond to a given emotion. While two of the models use emotions as continuous-valued coordinates from the valence-arousal plane, in order to present a finite number of samples, I had to use fixed values, namely combinations of -0.8, 0 and 0.8.

In each cell, I present samples generated by the three different models, named *discrete-token* (DT), *continuous-token* (CT), and *continuous-concatenated* (CC). While I implemented and trained all three models from scratch, using the dataset I've built, the models *continuous-token* (CT) and *continuous-concatenated* (CC) are designed by me, whereas the model *discrete-token* (DT) is the previous state-of-the-art method. In a quantitative task, namely next note prediction, my models *continuous-token* (CT) and *continuous-concatenated* (CC) outperform the standard model *discrete-token* (DT).

## Cherry-picked samples using four basic emotions

I first demonstrate some impressive outputs from my models, each selected manually among 16 samples in total. To explain the emotion-based conditioning in simple terms, we can refer to the figure below, demonstrating the valence-arousal plane and four emotions that correspond to each quadrant:


<br>

<p align="center">
  <img src="/images/valence_arousal.jpg" />
</p>

<!-- ![Valence-Arousal plane](/images/valence_arousal.jpg "Valence-Arousal plane") -->

To produce the sample outputs, I used an absolute value of 0.8 to pick conditions that are near the extremes. Hence conditioning based on continuous values correspond to the following: **[HAPPY: V=0.8 A=0.8], [ANGRY: V=-0.8 A=0.8], [SAD: V=-0.8 A=-0.8], and [RELAXED: V=0.8 A=-0.8]**. For the discrete conditioning model (*discrete-token*), I used the tokens which correspond to the extremes (**very low** and **very high**), out of 5 possible values (*very low*, *low*, *neutral*, *high*, and *very high*).

 <table style="width:70%" class="center">
  <tr>
    <td><b>Angry</b></td>
    <td><b>Happy</b></td>
  </tr>
  <tr>
    <!-- Angry -->
    <td>
      DT: 
      <audio controls preload="none">
        <source src="../assets/cherry/discrete_token/ANGRY.wav" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
      <br>
      CT:
      <audio controls preload="none">
        <source src="../assets/cherry/continuous_token/ANGRY.wav" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
      <br>
      CC:
      <audio controls preload="none">
        <source src="../assets/cherry/continuous_concat/ANGRY.wav" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
    </td>
    <td>
    <!-- Happy -->
      DT: 
      <audio controls preload="none">
        <source src="../assets/cherry/discrete_token/HAPPY.wav" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
      <br>
      CT:
      <audio controls preload="none">
        <source src="../assets/cherry/continuous_token/HAPPY.wav" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
      <br>
      CC:
      <audio controls preload="none">
        <source src="../assets/cherry/continuous_concat/HAPPY.wav" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
    </td>
  </tr>
  <tr>
    <td><b>Sad</b></td>
    <td><b>Relaxed</b></td>
  </tr>
  <tr>
  <!-- Sad -->
    <td>
      DT: 
      <audio controls preload="none">
        <source src="../assets/cherry/discrete_token/SAD.wav" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
      <br>
      CT:
      <audio controls preload="none">
        <source src="../assets/cherry/continuous_token/SAD.wav" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
      <br>
      CC:
      <audio controls preload="none">
        <source src="../assets/cherry/continuous_concat/SAD.wav" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
    </td>
    <td>
    <!-- Calm -->
      DT: 
      <audio controls preload="none">
        <source src="../assets/cherry/discrete_token/CALM.wav" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
      <br>
      CT:
      <audio controls preload="none">
        <source src="../assets/cherry/continuous_token/CALM.wav" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
      <br>
      CC:
      <audio controls preload="none">
        <source src="../assets/cherry/continuous_concat/CALM.wav" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
    </td>
  </tr>
</table> 

<br>

## Non-cherry-picked samples using nine emotions

Here, all presented samples are the first random samples that are generated using each configuration, and hence, are not cherry-picked, demonstrating the robustness and creativity of my models. Furthermore, there are samples with neutral conditioning values as well, hence the samples divide the valence-arousal plane into 9 areas. Here, the four corners correspond to the four quadrants of the previously presented valence-arousal plane image.

In the table below, the left, middle, and right columns contain samples generated with negative (unpleasant), neutral and positive (pleasant) valence condition values, respectively. Similarly, the top, middle, and bottom rows contain samples generated with positive (excited), neutral, and negative (calm) arousal condition values, respectively. 


<style>
table, th, td {
  padding-top:20px;
  padding-bottom:15px;
  text-align: center;
  vertical-align: middle;
  border: 1px solid black;
  border-collapse: collapse;
}

.dbox {
    position: relative;
    width: 140px;
    height: 50px;
    border: 1px solid black;
}
/* add diagonal line */
.dbox:after {
    content: '';
    display: block;
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    margin: auto;
    z-index: -1;
    background: linear-gradient(to top right, transparent calc(50% - 1px), black, transparent calc(50% + 1px)  );

}
/* align boxes with headings */
.dheading_tr,
.dheading_bl{
    position: absolute;
    /* or wider if needed/possible */
    width: 50%; 
    height: 50%;
    overflow: hidden;
    /* background-color: rgba(255, 255, 0, 0.2); */
} 
.dheading_tr {  
    top: 0;
    right: 0;
    display: flex;
    justify-content: flex-end;
    align-items: flex-start;
}
.dheading_bl {
    bottom: 0;
    left: 0;
    display: flex;
    justify-content: flex-start;
    align-items: flex-end;
}

</style>


<br>

<table style="width:95%">
  <tr>
    <th class="dbox">
      <div class="dheading_tr"><b>Valence</b></div>
      <div class="dheading_bl"><b>Arousal</b></div>
    </th>
    <th>Negative</th>
    <th>Neutral</th>
    <th>Positive</th>
  </tr>
  <tr>
  <tr>
    <td>Positive</td>
    <td> 
    <!-- negative positive -->
      DT: 
      <audio controls preload="none">
        <source src="../assets/no_cherry/discrete_token/0_V-2_A2.wav" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
      <br>
      CT:
      <audio controls preload="none">
        <source src="../assets/no_cherry/continuous_token/0_V-08_A08.wav" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
      <br>
      CC:
      <audio controls preload="none">
        <source src="../assets/no_cherry/continuous_concat/0_V-08_A08.wav" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
    </td>
    <td>
    <!-- neutral positive -->
      DT: 
      <audio controls preload="none">
        <source src="../assets/no_cherry/discrete_token/0_V0_A2.wav" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
      <br>
      CT:
      <audio controls preload="none">
        <source src="../assets/no_cherry/continuous_token/0_V00_A08.wav" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
      <br>
      CC:
      <audio controls preload="none">
        <source src="../assets/no_cherry/continuous_concat/0_V00_A08.wav" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
    </td>
    <td> 
    <!-- positive positive -->
      DT: 
      <audio controls preload="none">
        <source src="../assets/no_cherry/discrete_token/0_V2_A2.wav" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
      <br>
      CT:
      <audio controls preload="none">
        <source src="../assets/no_cherry/continuous_token/0_V08_A08.wav" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
      <br>
      CC:
      <audio controls preload="none">
        <source src="../assets/no_cherry/continuous_concat/0_V08_A08.wav" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
    </td>
  </tr>
  <tr>
    <td>Neutral</td>
    <td> 
    <!-- negative neutral -->
      DT: 
      <audio controls preload="none">
        <source src="../assets/no_cherry/discrete_token/0_V-2_A0.wav" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
      <br>
      CT:
      <audio controls preload="none">
        <source src="../assets/no_cherry/continuous_token/0_V-08_A00.wav" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
      <br>
      CC:
      <audio controls preload="none">
        <source src="../assets/no_cherry/continuous_concat/0_V-08_A00.wav" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
    </td>
    <td>
    <!-- neutral neutral -->
      DT: 
      <audio controls preload="none">
        <source src="../assets/no_cherry/discrete_token/0_V0_A0.wav" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
      <br>
      CT:
      <audio controls preload="none">
        <source src="../assets/no_cherry/continuous_token/0_V00_A00.wav" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
      <br>
      CC:
      <audio controls preload="none">
        <source src="../assets/no_cherry/continuous_concat/0_V00_A00.wav" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
    </td>
    <td>
    <!-- positive neutral -->
      DT: 
      <audio controls preload="none">
        <source src="../assets/no_cherry/discrete_token/0_V2_A0.wav" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
      <br>
      CT:
      <audio controls preload="none">
        <source src="../assets/no_cherry/continuous_token/0_V08_A00.wav" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
      <br>
      CC:
      <audio controls preload="none">
        <source src="../assets/no_cherry/continuous_concat/0_V08_A00.wav" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
    </td>
  </tr>
  <td>Negative</td>
    <td> 
    <!-- negative negative -->
      DT: 
      <audio controls preload="none">
        <source src="../assets/no_cherry/discrete_token/0_V-2_A-2.wav" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
      <br>
      CT:
      <audio controls preload="none">
        <source src="../assets/no_cherry/continuous_token/0_V-08_A-08.wav" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
      <br>
      CC:
      <audio controls preload="none">
        <source src="../assets/no_cherry/continuous_concat/0_V-08_A-08.wav" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
    </td>
    <td>
    <!-- neutral negative -->
      DT: 
      <audio controls preload="none">
        <source src="../assets/no_cherry/discrete_token/0_V0_A-2.wav" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
      <br>
      CT:
      <audio controls preload="none">
        <source src="../assets/no_cherry/continuous_token/0_V00_A-08.wav" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
      <br>
      CC:
      <audio controls preload="none">
        <source src="../assets/no_cherry/continuous_concat/0_V00_A-08.wav" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
    </td>
    <td> 
    <!-- positive negative -->
      DT: 
      <audio controls preload="none">
        <source src="../assets/no_cherry/discrete_token/0_V2_A-2.wav" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
      <br>
      CT:
      <audio controls preload="none">
        <source src="../assets/no_cherry/continuous_token/0_V08_A-08.wav" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
      <br>
      CC:
      <audio controls preload="none">
        <source src="../assets/no_cherry/continuous_concat/0_V08_A-08.wav" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
    </td>
  </tr>

  
</table> 

<br>

## Cherry-picked samples using dynamic conditioning

I also present samples that are generated using dynamic conditioning, where the condition values change over time. I used the continuous-token (CC) and continuous-concatenated (CC) models since only they allow dynamic conditioning.
<br> 

#### Increasing valence, increasing arousal

<table style="width:60%">
  <tr>
    <td>
      CT:
      <audio controls preload="none">
        <source src="../assets/no_cherry/smooth_change/continuous_token/V-08_08_A-08_08.wav" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
    </td>
    <td>
      CC:
      <audio controls preload="none">
        <source src="../assets/no_cherry/smooth_change/continuous_concat/V-08_08_A-08_08.wav" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
    </td>
  </tr>
</table>

<!-- <p>CT: &nbsp; &nbsp;
<audio controls preload="none">
  <source src="../assets/no_cherry/smooth_change/continuous_token/V-08_08_A-08_08.wav" type="audio/mpeg">
  Your browser does not support the audio element.
</audio>
</p>

<p>CC: &nbsp; &nbsp;
<audio controls preload="none">
  <source src="../assets/no_cherry/smooth_change/continuous_concat/V-08_08_A-08_08.wav" type="audio/mpeg">
  Your browser does not support the audio element.
</audio>
</p> -->

<br>

#### Decreasing valence, decreasing arousal

<table style="width:60%">
  <tr>
    <td>
      CT:
      <audio controls preload="none">
        <source src="../assets/no_cherry/smooth_change/continuous_token/V08_-08_A08_-08.wav" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
    </td>
    <td>
      CC:
      <audio controls preload="none">
        <source src="../assets/no_cherry/smooth_change/continuous_concat/V08_-08_A08_-08.wav" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
    </td>
  </tr>
</table>

<!-- <p>CT: &nbsp; &nbsp;
<audio controls preload="none">
  <source src="../assets/no_cherry/smooth_change/continuous_token/V08_-08_A08_-08.wav" type="audio/mpeg">
  Your browser does not support the audio element.
</audio>
</p>

<p>CC: &nbsp; &nbsp;
<audio controls preload="none">
  <source src="../assets/no_cherry/smooth_change/continuous_concat/V08_-08_A08_-08.wav" type="audio/mpeg">
  Your browser does not support the audio element.
</audio>
</p> -->

<br>

#### Increasing valence, decreasing arousal

<table style="width:60%">
  <tr>
    <td>
      CT:
      <audio controls preload="none">
        <source src="../assets/no_cherry/smooth_change/continuous_token/V-08_08_A08_-08.wav" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
    </td>
    <td>
      CC:
      <audio controls preload="none">
        <source src="../assets/no_cherry/smooth_change/continuous_concat/V-08_08_A08_-08.wav" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
    </td>
  </tr>
</table>

<!-- <p>CT: &nbsp; &nbsp;
<audio controls preload="none">
  <source src="../assets/no_cherry/smooth_change/continuous_token/V-08_08_A08_-08.wav" type="audio/mpeg">
  Your browser does not support the audio element.
</audio>
</p>

<p>CC: &nbsp; &nbsp;
<audio controls preload="none">
  <source src="../assets/no_cherry/smooth_change/continuous_concat/V-08_08_A08_-08.wav" type="audio/mpeg">
  Your browser does not support the audio element.
</audio>
</p> -->

<br>

#### Decreasing valence, increasing arousal

<table style="width:60%">
  <tr>
    <td>
      CT:
      <audio controls preload="none">
        <source src="../assets/no_cherry/smooth_change/continuous_token/V08_-08_A-08_08.wav" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
    </td>
    <td>
      CC:
      <audio controls preload="none">
        <source src="../assets/no_cherry/smooth_change/continuous_concat/V08_-08_A-08_08.wav" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
    </td>
  </tr>
</table>

<!-- <p>CT: &nbsp; &nbsp;
<audio controls preload="none">
  <source src="../assets/no_cherry/smooth_change/continuous_token/V08_-08_A-08_08.wav" type="audio/mpeg">
  Your browser does not support the audio element.
</audio>
</p>

<p>CC: &nbsp; &nbsp;
<audio controls preload="none">
  <source src="../assets/no_cherry/smooth_change/continuous_concat/V08_-08_A-08_08.wav" type="audio/mpeg">
  Your browser does not support the audio element.
</audio>
</p> -->

<br>

The samples have at most 5 instruments, namely, drums, bass guitar, electric guitar, piano, and strings. The midi files are rendered into wav format using the *Fluidsynth* software and *FluidR3_GM* soundfont. 

<br>

